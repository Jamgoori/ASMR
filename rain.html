<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Rainfall</title>
    <link href="./main.css" rel="stylesheet" />
  </head>
  <body>
    <nav class="ani-navbar">
      <h4 class="side-menu">Sound</h4>
      <button type="button" onclick="location.href='./index.html'">
        Fire wood
      </button>
      <button id="portal" type="button" onclick="location.href='./rain.html'">
        Rain
      </button>
    </nav>

    <section class="rain_main">
      <div class="main_function">
        <audio id="myaudio">
          <source src="./sound/rain.mp3" type="audio/mpeg" />
        </audio>
        <button id="playPause_btn" onclick="playPause()">
          <img src="./Images/play.png" class="play_btn" />
        </button>
        <div class="volume-slider-con">
          <div class="volume-slider"></div>
        </div>
        <h1 class="head">Heavy Rain</h1>
        <p>Heavy Rain Sounds for Sleep & Study</p>
      </div>
    </section>
    <script>
      let audio = document.getElementById("myaudio");
      let playPause_btn = document.getElementById("playPause_btn");
      let volume = document.getElementById("myvolume");
      let count = 0;

      function playPause() {
        if (count == 0) {
          count = 1;
          audio.play();
          audio.loop = true;
          playPause_btn.innerHTML =
            "<img src='./Images/pause.png' width='250px'>";
        } else {
          count = 0;
          audio.pause();
          playPause_btn.innerHTML =
            "<img src='./Images/play.png' width='250px'>";
        }
      }

      function stop() {
        playPause();
        audio.pause();
        audio.currentTime = 0;
        playPause_btn.innerHTML = "Play";
      }
      var e = document.querySelector(".volume-slider-con");
      var eInner = document.querySelector(".volume-slider");
      var audio1 = document.querySelector("audio");
      var drag = false;
      e.addEventListener("mousedown", function (ev) {
        drag = true;
        updateBar(ev.clientX);
      });
      document.addEventListener("mousemove", function (ev) {
        if (drag) {
          updateBar(ev.clientX);
        }
      });
      document.addEventListener("mouseup", function (ev) {
        drag = false;
      });
      var updateBar = function (x, vol) {
        var volume = e;
        var percentage;
        //if only volume have specificed
        //then direct update volume
        if (vol) {
          percentage = vol * 100;
        } else {
          var position = x - volume.offsetLeft;
          percentage = (100 * position) / volume.clientWidth;
        }

        if (percentage > 100) {
          percentage = 100;
        }
        if (percentage < 0) {
          percentage = 0;
        }

        //update volume bar and video volume
        eInner.style.width = percentage + "%";
        audio1.volume = percentage / 100;
      };
    </script>
  </body>
</html>
